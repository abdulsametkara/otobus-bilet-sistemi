<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:OtobusBiletSistemi.Mobile.ViewModels"
             x:Class="OtobusBiletSistemi.Mobile.Views.OdemePage"
             x:DataType="viewmodels:OdemeViewModel"
             Title="Ã–deme"
             Shell.NavBarIsVisible="False">

    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#60A5FA" Offset="0.0" />
            <GradientStop Color="#3B82F6" Offset="0.5" />
            <GradientStop Color="#1D4ED8" Offset="1.0" />
        </LinearGradientBrush>
    </ContentPage.Background>

    <ContentPage.Resources>
        <!-- Glassmorphism Card Style -->
        <Style x:Key="GlassmorphismCardStyle" TargetType="Border">
            <Setter Property="BackgroundColor" Value="#FFFFFF" />
            <Setter Property="Opacity" Value="0.95" />
            <Setter Property="Padding" Value="20" />
            <Setter Property="Margin" Value="0,8" />
            <Setter Property="StrokeThickness" Value="1" />
            <Setter Property="Stroke" Value="DarkSlateBlue" />
            <Setter Property="StrokeShape">
                <RoundRectangle CornerRadius="20"/>
            </Setter>
            <Setter Property="Shadow">
                <Shadow Brush="#00000030"
                        Offset="0,8"
                        Radius="24"
                        Opacity="0.3" />
            </Setter>
        </Style>

        <!-- Payment Method Card Style - Enhanced -->
        <Style x:Key="PaymentMethodCardStyle" TargetType="Border">
            <Setter Property="BackgroundColor" Value="#FFFFFF" />
            <Setter Property="Opacity" Value="0.9" />
            <Setter Property="Padding" Value="20" />
            <Setter Property="Margin" Value="0,8" />
            <Setter Property="StrokeThickness" Value="1" />
            <Setter Property="Stroke" Value="#E0E7FF" />
            <Setter Property="StrokeShape">
                <RoundRectangle CornerRadius="16"/>
            </Setter>
            <Setter Property="Shadow">
                <Shadow Brush="#00000020"
                        Offset="0,4"
                        Radius="12"
                        Opacity="0.15" />
            </Setter>
        </Style>

        <!-- Selected Payment Method Style - Enhanced -->
        <Style x:Key="SelectedPaymentMethodStyle" TargetType="Border" BasedOn="{StaticResource PaymentMethodCardStyle}">
            <Setter Property="Stroke" Value="#3B82F6" />
            <Setter Property="StrokeThickness" Value="2" />
            <Setter Property="Background">
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#EBF4FF" Offset="0.0" />
                    <GradientStop Color="#DBEAFE" Offset="1.0" />
                </LinearGradientBrush>
            </Setter>
            <Setter Property="Shadow">
                <Shadow Brush="#3B82F6"
                        Offset="0,4"
                        Radius="16"
                        Opacity="0.25" />
            </Setter>
        </Style>

        <!-- Modern Input Frame Style -->
        <Style x:Key="ModernInputFrameStyle" TargetType="Border">
            <Setter Property="BackgroundColor" Value="#FFFFFF" />
            <Setter Property="Opacity" Value="0.95" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="Margin" Value="0,8" />
            <Setter Property="StrokeThickness" Value="1" />
            <Setter Property="Stroke" Value="#E5E7EB" />
            <Setter Property="StrokeShape">
                <RoundRectangle CornerRadius="16"/>
            </Setter>
            <Setter Property="Shadow">
                <Shadow Brush="#00000015"
                        Offset="0,2"
                        Radius="8"
                        Opacity="0.1" />
            </Setter>
        </Style>

        <!-- Enhanced Entry Style -->
        <Style x:Key="ModernEntryStyle" TargetType="Entry">
            <Setter Property="BackgroundColor" Value="Transparent" />
            <Setter Property="TextColor" Value="{StaticResource TextPrimary}" />
            <Setter Property="PlaceholderColor" Value="{StaticResource Gray400}" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="HeightRequest" Value="50" />
            <Setter Property="Margin" Value="20,0,20,12" />
            <Setter Property="FontFamily" Value="OpenSansRegular" />
        </Style>

        <!-- Modern Button Style -->
        <Style x:Key="ModernPaymentButtonStyle" TargetType="Button">
            <Setter Property="HeightRequest" Value="56" />
            <Setter Property="FontSize" Value="18" />
            <Setter Property="FontAttributes" Value="Bold" />
            <Setter Property="CornerRadius" Value="16" />
            <Setter Property="TextColor" Value="{StaticResource White}" />
            <Setter Property="FontFamily" Value="OpenSansSemibold" />
            <Setter Property="Shadow">
                <Shadow Brush="#3B82F640"
                        Offset="0,4"
                        Radius="16"
                        Opacity="0.3" />
            </Setter>
            <Setter Property="Background">
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#3B82F6" Offset="0.0" />
                    <GradientStop Color="#1D4ED8" Offset="1.0" />
                </LinearGradientBrush>
            </Setter>
        </Style>
    </ContentPage.Resources>

    <Grid RowDefinitions="Auto, *, Auto" RowSpacing="0">

        <!-- 1. Header - Glassmorphism Design -->
        <Border Grid.Row="0" BackgroundColor="#1D4ED8" Opacity="0.95" Padding="20,24,20,24">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="0,0,24,24"/>
            </Border.StrokeShape>
            <Border.Shadow>
                <Shadow Brush="#00000020"
                        Offset="0,4"
                        Radius="16"
                        Opacity="0.2" />
            </Border.Shadow>
            
            <Grid ColumnDefinitions="Auto, *, Auto">
                <Border HorizontalOptions="Start" 
                        BackgroundColor="DarkSlateBlue" 
                        WidthRequest="44" 
                        HeightRequest="44"
                        StrokeThickness="1"
                        Stroke="DarkSlateBlue">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="22"/>
                    </Border.StrokeShape>
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding GeriCommand}"/>
                    </Border.GestureRecognizers>
                    <Path Data="M15.5,19 L8,11.5 L15.5,4" 
                          Stroke="{StaticResource White}" 
                          StrokeThickness="2.5" 
                          Aspect="Uniform" 
                          VerticalOptions="Center" 
                          HorizontalOptions="Center"/>
                </Border>
                
                <StackLayout Grid.Column="1" HorizontalOptions="Center" VerticalOptions="Center" Spacing="4">
                    <Label Text="GÃ¼venli Ã–deme" 
                           FontSize="22"
                           FontAttributes="Bold" 
                           HorizontalOptions="Center" 
                           TextColor="{StaticResource White}"
                           FontFamily="OpenSansSemibold"/>
                    <Label Text="256-bit SSL korumalÄ± iÅŸlem" 
                           FontSize="12" 
                           HorizontalOptions="Center"
                           TextColor="Bisque"
                           FontFamily="OpenSansRegular"/>
                </StackLayout>

                <!-- Enhanced Security Badge -->
                <Border Grid.Column="2" 
                        VerticalOptions="Center"
                        HorizontalOptions="End"
                        BackgroundColor="#1D4ED8"
                        Padding="10,6"
                        StrokeThickness="1"
                        Stroke="DarkSlateBlue">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="12"/>
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="#1D4ED840"
                                Offset="0,2"
                                Radius="8"
                                Opacity="0.3" />
                    </Border.Shadow>
                    <Label Text="ðŸ”’ GÃœVENLÄ°" 
                           TextColor="{StaticResource White}" 
                           FontSize="10" 
                           FontAttributes="Bold"
                           FontFamily="OpenSansSemibold"/>
                </Border>
            </Grid>
        </Border>

        <!-- 2. Content - Enhanced with Glassmorphism -->
        <ScrollView Grid.Row="1" Padding="20,24">
            <VerticalStackLayout Spacing="24">

                <!-- Trip Summary - Glassmorphism Card -->
                <Border Style="{StaticResource GlassmorphismCardStyle}">
                    <VerticalStackLayout Spacing="20">
                        <Grid ColumnDefinitions="Auto,*">
                            <Border Grid.Column="0" 
                                    BackgroundColor="#3B82F6"
                                    WidthRequest="48"
                                    HeightRequest="48"
                                    VerticalOptions="Start">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="16"/>
                                </Border.StrokeShape>
                                <Label Text="ðŸŽ«" 
                                       FontSize="20" 
                                       HorizontalOptions="Center" 
                                       VerticalOptions="Center"/>
                            </Border>
                            <StackLayout Grid.Column="1" Margin="16,0,0,0" Spacing="4">
                                <Label Text="Rezervasyon Ã–zeti" 
                                       FontSize="20"
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource TextPrimary}"
                                       FontFamily="OpenSansSemibold"/>
                                <Label Text="Bilet detaylarÄ±nÄ±zÄ± kontrol edin" 
                                       FontSize="14"
                                       TextColor="{StaticResource Gray500}"
                                       FontFamily="OpenSansRegular"/>
                            </StackLayout>
                        </Grid>
                        
                        <!-- Route Info - Enhanced Design -->
                        <Border BackgroundColor="#F8FAFC" 
                                Padding="20" 
                                StrokeThickness="0"
                                Margin="0,8">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="16"/>
                            </Border.StrokeShape>
                            <Grid ColumnDefinitions="*,Auto,*" VerticalOptions="Center" RowSpacing="16">
                                <VerticalStackLayout Grid.Column="0" HorizontalOptions="Start" Spacing="6">
                                    <Label Text="KALKIÅž" 
                                           FontSize="12" 
                                           FontAttributes="Bold"
                                           TextColor="#3B82F6"
                                           FontFamily="OpenSansSemibold"/>
                                    <Label Text="{Binding KalkisYeri}" 
                                           FontSize="18" 
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource TextPrimary}"
                                           FontFamily="OpenSansSemibold"/>
                                    <Label Text="{Binding SeferTarihi}" 
                                           FontSize="14" 
                                           TextColor="{StaticResource Gray600}"
                                           FontFamily="OpenSansRegular"/>
                                    <Label Text="{Binding KalkisSaati}" 
                                           FontSize="16" 
                                           FontAttributes="Bold"
                                           TextColor="#3B82F6"
                                           FontFamily="OpenSansSemibold"/>
                                </VerticalStackLayout>
                                
                                <Border Grid.Column="1" 
                                        BackgroundColor="#3B82F6"
                                        WidthRequest="40"
                                        HeightRequest="40"
                                        VerticalOptions="Center" 
                                        HorizontalOptions="Center">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="20"/>
                                    </Border.StrokeShape>
                                    <Path Stroke="{StaticResource White}" 
                                          StrokeThickness="2.5" 
                                          Data="M6,12 L18,12 M15,9 L18,12 L15,15" 
                                          VerticalOptions="Center" 
                                          HorizontalOptions="Center"/>
                                </Border>
                                
                                <VerticalStackLayout Grid.Column="2" HorizontalOptions="End" Spacing="6">
                                    <Label Text="VARIÅž" 
                                           FontSize="12" 
                                           FontAttributes="Bold"
                                           TextColor="#3B82F6" 
                                           HorizontalTextAlignment="End"
                                           FontFamily="OpenSansSemibold"/>
                                    <Label Text="{Binding VarisYeri}" 
                                           FontSize="18" 
                                           FontAttributes="Bold" 
                                           HorizontalTextAlignment="End"
                                           TextColor="{StaticResource TextPrimary}"
                                           FontFamily="OpenSansSemibold"/>
                                    <Label Text="{Binding SeferTarihi}" 
                                           FontSize="14" 
                                           TextColor="{StaticResource Gray600}" 
                                           HorizontalTextAlignment="End"
                                           FontFamily="OpenSansRegular"/>
                                    <Label Text="{Binding VarisSaati}" 
                                           FontSize="16" 
                                           FontAttributes="Bold"
                                           TextColor="#3B82F6" 
                                           HorizontalTextAlignment="End"
                                           FontFamily="OpenSansSemibold"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Border>

                        <!-- Passenger Info - Enhanced -->
                        <Border BackgroundColor="#F1F5F9" 
                                Padding="16" 
                                StrokeThickness="0">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <VerticalStackLayout Spacing="12">
                                <Grid ColumnDefinitions="Auto,*">
                                    <Border Grid.Column="0" 
                                            BackgroundColor="#60A5FA"
                                            WidthRequest="32"
                                            HeightRequest="32">
                                        <Border.StrokeShape>
                                            <RoundRectangle CornerRadius="8"/>
                                        </Border.StrokeShape>
                                        <Label Text="ðŸ‘¥" FontSize="16" HorizontalOptions="Center" VerticalOptions="Center"/>
                                    </Border>
                                    <Label Grid.Column="1" 
                                           Text="YOLCU BÄ°LGÄ°LERÄ°" 
                                           FontSize="14" 
                                           FontAttributes="Bold"
                                           TextColor="#60A5FA" 
                                           VerticalOptions="Center"
                                           Margin="12,0,0,0"
                                           FontFamily="OpenSansSemibold"/>
                                </Grid>
                                
                                <CollectionView ItemsSource="{Binding BiletSahipleri}" HeightRequest="120">
                                    <CollectionView.ItemTemplate>
                                        <DataTemplate>
                                            <Border BackgroundColor="{StaticResource White}" 
                                                    Padding="12" 
                                                    Margin="0,2"
                                                    StrokeThickness="0">
                                                <Border.StrokeShape>
                                                    <RoundRectangle CornerRadius="8"/>
                                                </Border.StrokeShape>
                                                <Grid ColumnDefinitions="Auto,*,Auto">
                                                    <Label Grid.Column="0" 
                                                           Text="{Binding KoltukNo, StringFormat='Koltuk {0}'}" 
                                                           FontSize="14" 
                                                           FontAttributes="Bold" 
                                                           VerticalOptions="Center"
                                                           TextColor="#3B82F6"
                                                           FontFamily="OpenSansSemibold"/>
                                                    <Label Grid.Column="1" 
                                                           Text="{Binding Ad} {Binding Soyad}" 
                                                           FontSize="14" 
                                                           VerticalOptions="Center" 
                                                           Margin="12,0"
                                                           TextColor="{StaticResource TextPrimary}"
                                                           FontFamily="OpenSansRegular"/>
                                                    <Label Grid.Column="2" 
                                                           Text="{Binding Cinsiyet}" 
                                                           FontSize="12" 
                                                           TextColor="{StaticResource Gray500}" 
                                                           VerticalOptions="Center"
                                                           FontFamily="OpenSansRegular"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </CollectionView.ItemTemplate>
                                </CollectionView>
                            </VerticalStackLayout>
                        </Border>

                        <!-- Price Breakdown - Enhanced -->
                        <Border BackgroundColor="#F8FAFC" 
                                Padding="20" 
                                StrokeThickness="1"
                                Stroke="#E2E8F0">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <VerticalStackLayout Spacing="12">
                                <Grid ColumnDefinitions="*,Auto">
                                    <Label Grid.Column="0" 
                                           Text="{Binding BiletSayisi, StringFormat='{0} x Bilet'}" 
                                           FontSize="16"
                                           TextColor="{StaticResource TextPrimary}"
                                           FontFamily="OpenSansRegular"/>
                                    <Label Grid.Column="1" 
                                           Text="{Binding ToplamFiyat, StringFormat='{0:C}'}" 
                                           FontSize="16"
                                           TextColor="{StaticResource TextPrimary}"
                                           FontFamily="OpenSansRegular"/>
                                </Grid>
                                <Border BackgroundColor="{StaticResource Gray300}" HeightRequest="1"/>
                                <Grid ColumnDefinitions="*,Auto">
                                    <Label Grid.Column="0" 
                                           Text="TOPLAM TUTAR" 
                                           FontSize="18" 
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource TextPrimary}"
                                           FontFamily="OpenSansSemibold"/>
                                    <Label Grid.Column="1" 
                                           Text="{Binding ToplamFiyat, StringFormat='{0:C}'}" 
                                           FontSize="24" 
                                           FontAttributes="Bold" 
                                           TextColor="#3B82F6"
                                           FontFamily="OpenSansSemibold"/>
                                </Grid>
                            </VerticalStackLayout>
                        </Border>
                    </VerticalStackLayout>
                </Border>

                <!-- Payment Methods - Enhanced -->
                <Border Style="{StaticResource GlassmorphismCardStyle}">
                    <VerticalStackLayout Spacing="20">
                        <Grid ColumnDefinitions="Auto,*">
                            <Border Grid.Column="0" 
                                    BackgroundColor="#60A5FA"
                                    WidthRequest="48"
                                    HeightRequest="48">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="16"/>
                                </Border.StrokeShape>
                                <Label Text="ðŸ’³" 
                                       FontSize="20" 
                                       HorizontalOptions="Center" 
                                       VerticalOptions="Center"/>
                            </Border>
                            <StackLayout Grid.Column="1" Margin="16,0,0,0" Spacing="4">
                                <Label Text="Ã–deme YÃ¶ntemi" 
                                       FontSize="20"
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource TextPrimary}"
                                       FontFamily="OpenSansSemibold"/>
                                <Label Text="GÃ¼venli Ã¶deme seÃ§enekleriniz" 
                                       FontSize="14"
                                       TextColor="{StaticResource Gray500}"
                                       FontFamily="OpenSansRegular"/>
                            </StackLayout>
                        </Grid>

                        <!-- Credit Card Option -->
                        <Border Style="{StaticResource PaymentMethodCardStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding SelectPaymentMethodCommand}" CommandParameter="CreditCard"/>
                            </Border.GestureRecognizers>
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <Border Grid.Column="0" 
                                        BackgroundColor="#3B82F6" 
                                        WidthRequest="48" 
                                        HeightRequest="48"
                                        VerticalOptions="Center">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="12"/>
                                    </Border.StrokeShape>
                                    <Label Text="ðŸ’³" FontSize="20" HorizontalOptions="Center" VerticalOptions="Center"/>
                                </Border>
                                <VerticalStackLayout Grid.Column="1" Margin="16,0" VerticalOptions="Center" Spacing="4">
                                    <Label Text="Kredi/Banka KartÄ±" 
                                           FontSize="16" 
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource TextPrimary}"
                                           FontFamily="OpenSansSemibold"/>
                                    <Label Text="Visa, Mastercard, Troy" 
                                           FontSize="12" 
                                           TextColor="{StaticResource Gray500}"
                                           FontFamily="OpenSansRegular"/>
                                </VerticalStackLayout>
                                <Border Grid.Column="2" 
                                        WidthRequest="24" 
                                        HeightRequest="24" 
                                        BackgroundColor="#3B82F6"
                                        IsVisible="{Binding IsCardSelected}"
                                        VerticalOptions="Center">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="12"/>
                                    </Border.StrokeShape>
                                    <Label Text="âœ“" 
                                           TextColor="{StaticResource White}" 
                                           FontSize="14" 
                                           FontAttributes="Bold"
                                           HorizontalOptions="Center" 
                                           VerticalOptions="Center"
                                           FontFamily="OpenSansSemibold"/>
                                </Border>
                            </Grid>
                        </Border>

                        <!-- Mobile Payment Option -->
                        <Border Style="{StaticResource PaymentMethodCardStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding SelectPaymentMethodCommand}" CommandParameter="Mobile"/>
                            </Border.GestureRecognizers>
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <Border Grid.Column="0" 
                                        BackgroundColor="#60A5FA" 
                                        WidthRequest="48" 
                                        HeightRequest="48"
                                        VerticalOptions="Center">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="12"/>
                                    </Border.StrokeShape>
                                    <Label Text="ðŸ“±" FontSize="20" HorizontalOptions="Center" VerticalOptions="Center"/>
                                </Border>
                                <VerticalStackLayout Grid.Column="1" Margin="16,0" VerticalOptions="Center" Spacing="4">
                                    <Label Text="Mobil Ã–deme" 
                                           FontSize="16" 
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource TextPrimary}"
                                           FontFamily="OpenSansSemibold"/>
                                    <Label Text="Turkcell, Vodafone, TÃ¼rk Telekom" 
                                           FontSize="12" 
                                           TextColor="{StaticResource Gray500}"
                                           FontFamily="OpenSansRegular"/>
                                </VerticalStackLayout>
                                <Border Grid.Column="2" 
                                        WidthRequest="24" 
                                        HeightRequest="24" 
                                        BackgroundColor="#3B82F6"
                                        IsVisible="{Binding IsMobileSelected}"
                                        VerticalOptions="Center">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="12"/>
                                    </Border.StrokeShape>
                                    <Label Text="âœ“" 
                                           TextColor="{StaticResource White}" 
                                           FontSize="14" 
                                           FontAttributes="Bold"
                                           HorizontalOptions="Center" 
                                           VerticalOptions="Center"
                                           FontFamily="OpenSansSemibold"/>
                                </Border>
                            </Grid>
                        </Border>
                    </VerticalStackLayout>
                </Border>

                <!-- Credit Card Form - Enhanced -->
                <Border Style="{StaticResource GlassmorphismCardStyle}" IsVisible="{Binding IsCardSelected}">
                    <VerticalStackLayout Spacing="20">
                        <Grid ColumnDefinitions="Auto,*">
                            <Border Grid.Column="0" 
                                    BackgroundColor="#3B82F6"
                                    WidthRequest="48"
                                    HeightRequest="48">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="16"/>
                                </Border.StrokeShape>
                                <Label Text="ðŸ’³" 
                                       FontSize="20" 
                                       HorizontalOptions="Center" 
                                       VerticalOptions="Center"/>
                            </Border>
                            <StackLayout Grid.Column="1" Margin="16,0,0,0" Spacing="4">
                                <Label Text="Kart Bilgileri" 
                                       FontSize="20"
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource TextPrimary}"
                                       FontFamily="OpenSansSemibold"/>
                                <Label Text="GÃ¼venli 256-bit SSL ÅŸifreleme" 
                                       FontSize="14"
                                       TextColor="{StaticResource Gray500}"
                                       FontFamily="OpenSansRegular"/>
                            </StackLayout>
                        </Grid>

                        <!-- Card Number -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="ðŸ’³ KART NUMARASI *" 
                                   TextColor="{StaticResource TextSecondary}" 
                                   FontSize="14" 
                                   FontAttributes="Bold"
                                   FontFamily="OpenSansSemibold"/>
                            <Border Style="{StaticResource ModernInputFrameStyle}">
                                <Entry Text="{Binding CardNumber}" 
                                       Placeholder="1234 5678 9012 3456" 
                                       Keyboard="Numeric" 
                                       MaxLength="19"
                                       Style="{StaticResource ModernEntryStyle}"/>
                            </Border>
                        </VerticalStackLayout>

                        <!-- Card Holder -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="ðŸ‘¤ KART SAHÄ°BÄ° *" 
                                   TextColor="{StaticResource TextSecondary}" 
                                   FontSize="14" 
                                   FontAttributes="Bold"
                                   FontFamily="OpenSansSemibold"/>
                            <Border Style="{StaticResource ModernInputFrameStyle}">
                                <Entry Text="{Binding CardHolder}" 
                                       Placeholder="JOHN DOE" 
                                       Keyboard="Text" 
                                       Style="{StaticResource ModernEntryStyle}"/>
                            </Border>
                        </VerticalStackLayout>

                        <!-- Expiry and CVV -->
                        <Grid ColumnDefinitions="*,*" ColumnSpacing="16">
                            <VerticalStackLayout Grid.Column="0" Spacing="8">
                                <Label Text="ðŸ“… SON KULLANMA *" 
                                       TextColor="{StaticResource TextSecondary}" 
                                       FontSize="14" 
                                       FontAttributes="Bold"
                                       FontFamily="OpenSansSemibold"/>
                                <Border Style="{StaticResource ModernInputFrameStyle}">
                                    <Entry Text="{Binding ExpiryDate}" 
                                           Placeholder="MM/YY" 
                                           Keyboard="Numeric" 
                                           MaxLength="5"
                                           Style="{StaticResource ModernEntryStyle}"/>
                                </Border>
                            </VerticalStackLayout>
                            <VerticalStackLayout Grid.Column="1" Spacing="8">
                                <Label Text="ðŸ”’ CVV *" 
                                       TextColor="{StaticResource TextSecondary}" 
                                       FontSize="14" 
                                       FontAttributes="Bold"
                                       FontFamily="OpenSansSemibold"/>
                                <Border Style="{StaticResource ModernInputFrameStyle}">
                                    <Entry Text="{Binding CVV}" 
                                           Placeholder="123" 
                                           Keyboard="Numeric" 
                                           MaxLength="3"
                                           IsPassword="True"
                                           Style="{StaticResource ModernEntryStyle}"/>
                                </Border>
                            </VerticalStackLayout>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- Mobile Payment Form - Enhanced -->
                <Border Style="{StaticResource GlassmorphismCardStyle}" IsVisible="{Binding IsMobileSelected}">
                    <VerticalStackLayout Spacing="20">
                        <Grid ColumnDefinitions="Auto,*">
                            <Border Grid.Column="0" 
                                    BackgroundColor="#60A5FA"
                                    WidthRequest="48"
                                    HeightRequest="48">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="16"/>
                                </Border.StrokeShape>
                                <Label Text="ðŸ“±" 
                                       FontSize="20" 
                                       HorizontalOptions="Center" 
                                       VerticalOptions="Center"/>
                            </Border>
                            <StackLayout Grid.Column="1" Margin="16,0,0,0" Spacing="4">
                                <Label Text="Mobil Ã–deme" 
                                       FontSize="20"
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource TextPrimary}"
                                       FontFamily="OpenSansSemibold"/>
                                <Label Text="OperatÃ¶r faturanÄ±za yansÄ±yacaktÄ±r" 
                                       FontSize="14"
                                       TextColor="{StaticResource Gray500}"
                                       FontFamily="OpenSansRegular"/>
                            </StackLayout>
                        </Grid>

                        <VerticalStackLayout Spacing="8">
                            <Label Text="ðŸ“± CEP TELEFONU NUMARASI *" 
                                   TextColor="{StaticResource TextSecondary}" 
                                   FontSize="14" 
                                   FontAttributes="Bold"
                                   FontFamily="OpenSansSemibold"/>
                            <Border Style="{StaticResource ModernInputFrameStyle}">
                                <Entry Text="{Binding MobileNumber}" 
                                       Placeholder="05xxxxxxxxx" 
                                       Keyboard="Telephone" 
                                       MaxLength="11"
                                       Style="{StaticResource ModernEntryStyle}"/>
                            </Border>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Border>

                <!-- Security Notice - Enhanced -->
                <Border BackgroundColor="#3B82F6" 
                        Opacity="0.95"
                        Padding="20" 
                        StrokeThickness="1"
                        Stroke="DarkSlateBlue">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="16"/>
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="#3B82F640"
                                Offset="0,4"
                                Radius="16"
                                Opacity="0.3" />
                    </Border.Shadow>
                    <Grid ColumnDefinitions="Auto,*">
                        <Border Grid.Column="0" 
                                BackgroundColor="DarkSlateBlue"
                                WidthRequest="48"
                                HeightRequest="48">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="16"/>
                            </Border.StrokeShape>
                            <Label Text="ðŸ”’" FontSize="20" HorizontalOptions="Center" VerticalOptions="Center"/>
                        </Border>
                        <VerticalStackLayout Grid.Column="1" Margin="16,0,0,0" Spacing="6">
                            <Label Text="256-bit SSL GÃ¼venlik" 
                                   FontSize="16" 
                                   FontAttributes="Bold" 
                                   TextColor="{StaticResource White}"
                                   FontFamily="OpenSansSemibold"/>
                            <Label Text="Kart bilgileriniz PCI DSS standartlarÄ±na uygun olarak ÅŸifrelenir ve saklanmaz. TÃ¼m iÅŸlemler gÃ¼venli sunucularÄ±mÄ±zda gerÃ§ekleÅŸtirilir." 
                                   FontSize="13" 
                                   TextColor="#FFFFFF90"
                                   FontFamily="OpenSansRegular"/>
                        </VerticalStackLayout>
                    </Grid>
                </Border>

                <!-- Bottom Spacing -->
                <BoxView HeightRequest="32" Color="Transparent"/>
            </VerticalStackLayout>
        </ScrollView>
        
        <!-- 3. Footer - Enhanced Payment Button -->
        <Border Grid.Row="2" 
                BackgroundColor="#1D4ED8" 
                Opacity="0.95"
                Padding="24,20"
                StrokeThickness="1"
                Stroke="DarkSlateBlue">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="24,24,0,0"/>
            </Border.StrokeShape>
            <Border.Shadow>
                <Shadow Brush="#1D4ED860"
                        Offset="0,-4"
                        Radius="20"
                        Opacity="0.3" />
            </Border.Shadow>
            
            <Grid RowDefinitions="Auto,Auto" RowSpacing="12">
                <Label Grid.Row="0"
                       Text="Ã–demeyi onaylayarak KullanÄ±m ÅžartlarÄ± ve Gizlilik PolitikasÄ±'nÄ± kabul etmiÅŸ olursunuz."
                       FontSize="11"
                       TextColor="PaleTurquoise"
                       HorizontalTextAlignment="Center"
                       FontFamily="OpenSansRegular"/>
                
                <Button Grid.Row="1"
                        Text="{Binding ToplamFiyat, StringFormat='ðŸ”’ {0:C} GÃ¼venli Ã–deme'}" 
                        Command="{Binding OdemeYapCommand}" 
                        Style="{StaticResource ModernPaymentButtonStyle}"/>
            </Grid>
        </Border>

    </Grid>
</ContentPage> 